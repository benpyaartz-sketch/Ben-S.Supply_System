{% extends "base_admin.html" %}
{% block title %}Maoni ya Wateja{% endblock %}

{% block content %}
<h1 class="highlight-title" style="text-align:center;">Maoni ya Wateja</h1>

<!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="flash {{ category }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}

{% if feedbacks %}
<table border="1" cellpadding="10" style="width:100%; border-collapse: collapse; background:#fff; text-align:left; margin-top:20px;">
    <thead style="background-color:#004080; color:white;">
        <tr>
            <th>ID</th>
            <th>Jina</th>
            <th>Email</th>
            <th>Ujumbe</th>
            <th>Tarehe</th>
            <th>Vitendo</th>
        </tr>
    </thead>
    <tbody>
    {% for fb in feedbacks %}
    <tr>
        <td>{{ fb.id }}</td>
        <td>{{ fb.name }}</td>
        <td>{{ fb.email or 'Hakuna' }}</td>
        <td style="max-width:300px; white-space:pre-wrap;">{{ fb.message }}</td>
        <td>{{ fb.created_at | datetimeformat }}</td>
        <td>
            <form method="POST" action="{{ url_for('admin_delete_feedback', feedback_id=fb.id) }}" 
                  onsubmit="return confirm('Una hakika unataka kufuta maoni haya?');" style="display:inline;">
                <button type="submit" style="background:red; color:white; border:none; padding:5px 10px; border-radius:5px; cursor:pointer;">Futa</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</tbody>
</table>
{% else %}
<p style="text-align:center; margin-top:20px; font-weight:bold;">Hakuna maoni bado.</p>
{% endif %}

<style>
table th, table td { 
    padding:10px; 
    border:1px solid #ccc; 
}
table tr:hover { 
    background:#f1f1f1; 
}
.flash.success { 
    background:#d4edda; 
    padding:10px; 
    margin:10px 0; 
    border-radius:5px; 
    color:#155724; 
}
.flash.error { 
    background:#f8d7da; 
    padding:10px; 
    margin:10px 0; 
    border-radius:5px; 
    color:#721c24; 
}
.flash.warning { 
    background:#fff3cd; 
    padding:10px; 
    margin:10px 0; 
    border-radius:5px; 
    color:#856404; 
}

.highlight-title {
    background: #004080;
    color: white;
    padding: 5px 12px;
    border-radius: 6px;
    display: inline-block;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
    margin-bottom: 20px;
}
</style>
{% endblock %}
